<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>申请独家号 - 分享平台</title>
    <head th:include="head:: head"></head>
    <script type="text/javascript" src="../static/js/bootstrap3-validation.js" th:src="@{/js/bootstrap3-validation.js}"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <link href="../static/css/bootstrap-ie78.css" rel="stylesheet" />
    <script src="../static/js/respond.min.js"></script>
    <script src="../static/js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript">
        $(function() {

            $("#form").validation({
                icon: true
            });

            // 要从后台数据确定填的是不是已注册过了，采用回调方法
            $("form").validation(function(obj,params){
              if (obj.id=='exclusiveName'){
                $.post("/verify/ExclusiveName",{exclusiveName :$(obj).val()},function(data){
                  params.err = !data.success;
                  params.msg = data.msg;
                });
              }}
              ,{reqmark:true} //这个参数是设必填不要显示有星号，默认是有星号的
            );


            $("#submit").on('click', function(event) {
                // 最后要调用 valid()方法。
                //  valide(object,msg),提示信息显示，object位置后面增加提示信息。如不填object 则自动找最后一个button submit.
                //  valide(msg)

                if ($("#form").valid(this, '内容出错') == false) {
                    return false;
                }else{
                $.post("/e/create",{exclusiveName: $("#exclusiveName").val()},function(data){
                      if(data.msg == '申请成功')
                         location.href="http://localhost/u"+data.exclusive.user.id+"/exclusives";
                });
                return true;
            }
            })
        })
    </script>
    <style type="text/css">
      @media (min-width: 1024px) {
            .btn-space{
                position: relative;
                left: 6%;
            }
        }
    </style>
</head>


<body>
    <div th:include="header:: header" role="navigation" class="zu-top nav-style" data-za-module="TopNavBar" ></div>
    <!-- 水平排列的表单 -->
    <div class="container" style="margin-top:4%;">
        <div class="page-header">
            <h1>申请 <small>申请独家号</small></h1>
        </div>
        <form class="form-horizontal" id="form" action = "javascript:;" role="form">
            <div class="form-group">
                <label for="exclusiveName" class="col-sm-2 control-label">独家号名</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control" id="exclusiveName" check-type="required" required-message="请填写独家号名。" />
                </div>
            </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" id="submit" class="btn btn-primary col-sm-3">申请</button>
                    <button type="reset" class="btn btn-primary col-sm-3 btn-space">重置</button>
                </div>
            </div>
        </form>
    </div>
    
</body>

</html>
